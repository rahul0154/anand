{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function ($) {\n\n\tvar ProgressIndicatorHelper = function () {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\t'position': 'append',\n\t\t\t'mode': 'show',\n\t\t\t'blockInfo': {\n\t\t\t\t'elementToBlock': 'body'\n\t\t\t},\n\t\t\t'message': ''\n\t\t}\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t}\n\n\t\tthis.blockOverlayCSS = {\n\t\t\t'opacity': '0.2'\n\t\t}\n\n\t\tthis.blockCss = {\n\t\t\t'border': '',\n\t\t\t'backgroundColor': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t}\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\t'left': '37.5%',\n\t\t\t'position': 'fixed',\n\t\t\t'top': '4.5%',\n\t\t\t'z-index': '100000'\n\t\t}\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function (element, options) {\n\t\t\tif (typeof options === \"undefined\") {\n\t\t\t\toptions = {};\n\t\t\t}\n\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== \"undefined\") {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.initActions = function () {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\n\t\tthis.isPageBlockMode = function () {\n\t\t\tif ((typeof this.elementToBlock !== \"undefined\") && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.isBlockMode = function () {\n\t\t\tif ((typeof this.options.blockInfo !== \"undefined\") && (this.options.blockInfo.enabled == true)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.show = function () {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml = '<div class=\"imageHolder ' + className + '\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage.length == 0) {\n\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t}\n\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage)\n\t\t\t}\n\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase \"prepend\":\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"html\":\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"replace\":\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t}\n\n\t\tthis.hide = function () {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== \"undefined\") {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t}\n\n\t}\n\n\t$.fn.progressIndicator = function (options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function (index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== \"undefined\") {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\n\t};\n\n\t$.progressIndicator = function (options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t}\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n\n"],"names":["$","defaults","imageContainerCss","blockOverlayCSS","blockCss","showTopCSS","width","showOnTop","init","element","options","thisInstance","extend","container","position","isBlockMode","elementToBlock","blockInfo","initActions","mode","show","hide","isPageBlockMode","is","enabled","smallLoadingImage","className","jQImageHtml","jQuery","imageHtml","css","jQMessage","message","length","app","vtranslate","html","append","messageContainer","addClass","prepend","replaceWith","blockedElement","blockUI","overlayCSS","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","jQueryObject","data","progressIndicatorInstance","progressImageContainer","baseZ"],"mappings":"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"}