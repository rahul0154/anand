'use strict';

Settings_Workflows_Edit_Js("Settings_Workflows_Edit1_Js",{},{init:function init(){this.initialize();},getContainer:function getContainer(){return this.step1Container},setContainer:function setContainer(element){return this.step1Container=element,this},initialize:function initialize(container){"undefined"==typeof container&&(container=jQuery("#workflow_step1")),container.is("#workflow_step1")?this.setContainer(container):this.setContainer(jQuery("#workflow_step1"));},submit:function submit(){var aDeferred=jQuery.Deferred(),form=this.getContainer(),formData=form.serializeFormData(),progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});return AppConnector.request(formData).done(function(data){form.hide(),progressIndicatorElement.progressIndicator({mode:"hide"}),aDeferred.resolve(data);}),aDeferred.promise()},registerEventForScheduledWorkflow:function registerEventForScheduledWorkflow(){var thisInstance=this;jQuery("input[name=\"execution_condition\"]").on("click",function(e){var element=jQuery(e.currentTarget),scheduleBoxContainer=jQuery("#scheduleBox");element.is(":checked")&&"6"==element.val()?scheduleBoxContainer.removeClass("d-none"):scheduleBoxContainer.addClass("d-none");}),app.registerEventForClockPicker($(".clockPicker")),App.Fields.Date.register("#scheduleByDate",!0),App.Fields.Picklist.showSelect2ElementView($("#annualDates")),App.Fields.Picklist.showSelect2ElementView($("#schdayofweek")),App.Fields.Picklist.showSelect2ElementView($("#schdayofmonth"));var currentYear=new Date().getFullYear(),weekStartId=jQuery("#weekStartDay").data("value");$("#annualDatePicker").datepicker({weekStart:weekStartId,startDate:"01/01/"+currentYear,endDate:"12/31/"+currentYear,format:"mm/dd/yyyy",maxViewMode:1,todayBtn:"linked",language:jQuery("body").data("language"),multidate:!0,todayHighlight:!0}).on("changeDate",function(e){var html="",annualDatesEle=jQuery("#annualDates");for(var index in thisInstance.updateAnnualDates(annualDatesEle),e.dates){var date=e.dates[index],formated=moment(date).format("YYYY-MM-DD");html+="<option selected value="+formated+">"+formated+"</option>";}annualDatesEle.append(html),annualDatesEle.trigger("select2:updated");});var annualDatesEle=jQuery("#annualDates");thisInstance.updateAnnualDates(annualDatesEle),annualDatesEle.trigger("select2:updated");},updateAnnualDates:function updateAnnualDates(annualDatesEle){annualDatesEle.html("");var annualDatesJSON=jQuery("#hiddenAnnualDates").val();if(annualDatesJSON){var hiddenDates="",annualDates=JSON.parse(annualDatesJSON);for(var j in annualDates)hiddenDates+="<option selected value="+annualDates[j]+">"+annualDates[j]+"</option>";annualDatesEle.html(hiddenDates);}},registerEventForChangeInScheduledType:function registerEventForChangeInScheduledType(){var thisInstance=this;jQuery("#schtypeid").on("change",function(e){var element=jQuery(e.currentTarget),value=element.val();thisInstance.showScheduledTime(),thisInstance.hideScheduledWeekList(),thisInstance.hideScheduledMonthByDateList(),thisInstance.hideScheduledSpecificDate(),thisInstance.hideScheduledAnually(),"1"==value?thisInstance.hideScheduledTime():"3"==value?thisInstance.showScheduledWeekList():"4"==value?thisInstance.showScheduledSpecificDate():"5"==value?thisInstance.showScheduledMonthByDateList():"7"==value&&thisInstance.showScheduledAnually();});},hideScheduledTime:function hideScheduledTime(){jQuery("#scheduledTime").addClass("d-none");},showScheduledTime:function showScheduledTime(){jQuery("#scheduledTime").removeClass("d-none");},hideScheduledWeekList:function hideScheduledWeekList(){jQuery("#scheduledWeekDay").addClass("d-none");},showScheduledWeekList:function showScheduledWeekList(){jQuery("#scheduledWeekDay").removeClass("d-none");},hideScheduledMonthByDateList:function hideScheduledMonthByDateList(){jQuery("#scheduleMonthByDates").addClass("d-none");},showScheduledMonthByDateList:function showScheduledMonthByDateList(){jQuery("#scheduleMonthByDates").removeClass("d-none");},hideScheduledSpecificDate:function hideScheduledSpecificDate(){jQuery("#scheduleByDate").addClass("d-none");},showScheduledSpecificDate:function showScheduledSpecificDate(){jQuery("#scheduleByDate").removeClass("d-none");},hideScheduledAnually:function hideScheduledAnually(){jQuery("#scheduleAnually").addClass("d-none");},showScheduledAnually:function showScheduledAnually(){jQuery("#scheduleAnually").removeClass("d-none");},registerEvents:function registerEvents(){var container=this.getContainer();container.find("[type=\"submit\"]").removeAttr("disabled");var opts=app.validationEngineOptions;opts.onValidationComplete=function(form,valid){return valid},opts.promptPosition="bottomRight",container.validationEngine(opts),this.registerEventForScheduledWorkflow(),this.registerEventForChangeInScheduledType();}});
//# sourceMappingURL=Edit1.min.js.map
