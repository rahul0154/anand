{"version":3,"file":"GenerateModal.min.js","sources":["GenerateModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Vtiger_GenerateModal_Js\", {}, {\n\tregisterGenetateButton: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('button.js-genetate-button').on('click', function (e) {\n\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tvar actionUrl = currentTarget.data('url');\n\t\t\tvar method = jQuery('[name=\"method\"]:checked');\n\t\t\tif (method.length <= 0) {\n\t\t\t\twindow.location.href = actionUrl;\n\t\t\t} else {\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'GenerateRecords',\n\t\t\t\t\trecords: jQuery('[name=\"all_records\"]').val(),\n\t\t\t\t\ttemplate: currentTarget.data('id'),\n\t\t\t\t\ttarget: currentTarget.data('name'),\n\t\t\t\t\tmethod: method.val()\n\t\t\t\t};\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tvar records = response.ok;\n\t\t\t\t\t\tthisInstance.summary(container, response);\n\t\t\t\t\t\tdocument.progressLoader.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\tif (method.val() == 1) {\n\t\t\t\t\t\t\tfor (var i in records) {\n\t\t\t\t\t\t\t\twindow.open(actionUrl + records[i], '_blank');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tsummary: function (container, data) {\n\t\tcontainer.find('.modal-title').text(app.vtranslate('JS_SUMMARY'));\n\t\tcontainer.find('.modal-body').html('<div>' + app.vtranslate('JS_SELECTED_RECORDS') +\n\t\t\t': <strong>' + data.all + '</strong></div><div>' +\n\t\t\tapp.vtranslate('JS_SUCCESSFULLY_PERFORMED_ACTION_FOR') + ': <strong>' +\n\t\t\tdata.ok.length + '</strong></div><div>' + app.vtranslate('JS_ACTION_FAILED_FOR') +\n\t\t\t': <strong>' + data.fail.length + '</strong></div>');\n\t},\n\tregisterEvents: function () {\n\t\tvar container = jQuery('.generateMappingModal');\n\t\tthis.registerGenetateButton(container);\n\t}\n\n});\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_GenerateModal_Js();\n\tinstance.registerEvents();\n})\n"],"names":["jQuery","Class","registerGenetateButton","container","find","on","e","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","currentTarget","actionUrl","data","method","length","window","location","href","params","module","getModuleName","action","records","val","template","target","dataType","AppConnector","request","done","response","ok","thisInstance","summary","open","i","fail","err","errorLog","text","html","all","registerEvents","ready","instance"],"mappings":";;AAGAA,OAAOC,KAAP,CAAa,yBAAb,CAAwC,EAAxC,CAA4C,CAC3CC,uBAAwB,gCAAUC,SAAV,CAAqB,CAC5C,iBAAmB,IAAnB,CACAA,UAAUC,IAAV,CAAe,2BAAf,EAA4CC,EAA5C,CAA+C,OAA/C,CAAwD,SAAUC,CAAV,CAAa,CACpEC,SAASC,cAAT,CAA0BR,OAAOS,iBAAP,CAAyB,CAClDC,QAASC,IAAIC,UAAJ,CAAe,wBAAf,CADyC,CAElDC,SAAU,MAFwC,CAGlDC,UAAW,CACVC,UADU,CAHuC,CAAzB,CAD0C,mBAQhDf,OAAOM,EAAEU,aAAT,CARgD,CAShEC,UAAYD,cAAcE,IAAd,CAAmB,KAAnB,CAToD,CAUhEC,OAASnB,OAAO,yBAAP,CAVuD,CAWpE,GAAqB,CAAjB,SAAOoB,MAAX,CACCC,OAAOC,QAAP,CAAgBC,IAAhB,CAAuBN,SADxB,KAEO,CACN,WAAa,EAAb,CACAO,OAAON,IAAP,CAAc,CACbO,OAAQd,IAAIe,aAAJ,EADK,CAEbC,OAAQ,iBAFK,CAGbC,QAAS5B,OAAO,sBAAP,EAA+B6B,GAA/B,EAHI,CAIbC,SAAUd,cAAcE,IAAd,CAAmB,IAAnB,CAJG,CAKba,OAAQf,cAAcE,IAAd,CAAmB,MAAnB,CALK,CAMbC,OAAQA,OAAOU,GAAP,EANK,CAFR,CAUNL,OAAOQ,QAAP,CAAkB,MAVZ,CAWNC,aAAaC,OAAb,CAAqBV,MAArB,EAA6BW,IAA7B,CAAkC,SAAUjB,IAAV,CAAgB,CACjD,aAAeA,WAAf,CACA,GAAIA,YAAJ,CAAqB,CACpB,YAAckB,SAASC,EAAvB,CAGA,GAFAC,aAAaC,OAAb,CAAqBpC,SAArB,CAAgCiC,QAAhC,CAEA,CADA7B,SAASC,cAAT,CAAwBC,iBAAxB,CAA0C,CAAC,KAAQ,MAAT,CAA1C,CACA,CAAoB,CAAhB,SAAOoB,GAAP,EAAJ,CACC,IAAK,KAAL,WAAA,CACCR,OAAOmB,IAAP,CAAYvB,UAAYW,QAAQa,CAAR,CAAxB,CAAoC,QAApC,EAGF,CACD,CAZD,EAYGC,IAZH,CAYQ,SAAUxB,IAAV,CAAgByB,GAAhB,CAAqB,CAC5BhC,IAAIiC,QAAJ,CAAa1B,IAAb,CAAmByB,GAAnB,EACA,CAdD,EAeA,CACD,CAxCD,EAyCA,CA5C0C,CA6C3CJ,QAAS,iBAAUpC,SAAV,CAAqBe,IAArB,CAA2B,CACnCf,UAAUC,IAAV,CAAe,cAAf,EAA+ByC,IAA/B,CAAoClC,IAAIC,UAAJ,CAAe,YAAf,CAApC,CADmC,CAEnCT,UAAUC,IAAV,CAAe,aAAf,EAA8B0C,IAA9B,CAAmC,QAAUnC,IAAIC,UAAJ,CAAe,qBAAf,CAAV,CAClC,YADkC,CACnBM,KAAK6B,GADc,CACR,sBADQ,CAElCpC,IAAIC,UAAJ,CAAe,sCAAf,CAFkC,CAEuB,YAFvB,CAGlCM,KAAKmB,EAAL,CAAQjB,MAH0B,CAGjB,sBAHiB,CAGQT,IAAIC,UAAJ,CAAe,sBAAf,CAHR,CAIlC,YAJkC,CAInBM,KAAKwB,IAAL,CAAUtB,MAJS,CAIA,iBAJnC,EAKA,CApD0C,CAqD3C4B,eAAgB,yBAAY,CAC3B,cAAgBhD,OAAO,uBAAP,CAAhB,CACA,KAAKE,sBAAL,CAA4BC,SAA5B,EACA,CAxD0C,CAA5C,EA4DAH,OAAOO,QAAP,EAAiB0C,KAAjB,CAAuB,UAAa,CACnC,aAAe,2BAAf,CACAC,SAASF,cAAT,GACA,CAHD"}